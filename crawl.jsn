import fs from "fs";

let files = fs.readFileSync("./files", "utf-8").split("\n").map((i) => i.length > 0 && i).filter((it) => it);
let folders = [
        ...files.reduce((prev, it) =>
            prev.add(it.substr(0, it.lastIndexOf("/"))) && prev
        , new Set()),
    ];
let readmes = files.filter(it => /readme\.md$/.test(it));

let descriptions = readmes.reduce((prev, file) => ( prev[file] = fs.readFileSync(file, "utf-8") ) && prev, {});

fs.writeFile("config.json", JSON.stringify({ files, folders, descriptions }));
export default {files, folders, descriptions};
